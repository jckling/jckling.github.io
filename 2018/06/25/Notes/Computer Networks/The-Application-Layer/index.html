<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;zh-HK&quot;,&quot;zh-TW&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>《计算机网络（英文版·第5版）》 The Application Layer | Jckling's Blog</title><meta name="keywords" content="计算机网络,Computer Networks"><meta name="author" content="Jckling"><meta name="copyright" content="Jckling"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="《计算机网络》第五版（英文） 应用层">
<meta property="og:type" content="article">
<meta property="og:title" content="《计算机网络（英文版·第5版）》 The Application Layer">
<meta property="og:url" content="https://jckling.github.io/2018/06/25/Notes/Computer%20Networks/The-Application-Layer/index.html">
<meta property="og:site_name" content="Jckling&#39;s Blog">
<meta property="og:description" content="《计算机网络》第五版（英文） 应用层">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg">
<meta property="article:published_time" content="2018-06-25T00:18:44.000Z">
<meta property="article:modified_time" content="2021-11-23T14:04:58.773Z">
<meta property="article:author" content="Jckling">
<meta property="article:tag" content="计算机网络">
<meta property="article:tag" content="Computer Networks">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg"><link rel="shortcut icon" href="/img/jckling/favicon.ico"><link rel="canonical" href="https://jckling.github.io/2018/06/25/Notes/Computer%20Networks/The-Application-Layer/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google_site_verification" content="pZZt69mo0ndoxIJ1vjEe830lXbvD26aiVAZ-k0FWM5k"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?20b7797c0b5f4e821c1449cd4c6c98c8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-164555720-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-164555720-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《计算机网络（英文版·第5版）》 The Application Layer',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-23 22:04:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Jckling's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/jckling/avatar.jpg" onerror="onerror=null;src='/img/jckling/avatar_404.png'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">107</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jckling's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movie</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">《计算机网络（英文版·第5版）》 The Application Layer</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2018-06-25T00:18:44.000Z" title="undefined 2018-06-25 08:18:44">2018-06-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Notes/">Notes</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="《计算机网络（英文版·第5版）》 The Application Layer"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2018/06/25/Notes/Computer%20Networks/The-Application-Layer/#post-comment"><span class="waline-comment-count" id="/2018/06/25/Notes/Computer%20Networks/The-Application-Layer/"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="DNS-——-Domain-Name-System-域名系统"><a href="#DNS-——-Domain-Name-System-域名系统" class="headerlink" title="DNS —— Domain Name System, 域名系统"></a>DNS —— Domain Name System, 域名系统</h1><p>DNS 的本质是发明了一种层次的、基于域名的命名方案，并且用一个分布式数据库系统加以实现</p>
<p>DNS 的主要用途是将主机名映射成 IP 地址</p>
<p>DNS 的使用方法：</p>
<ul>
<li>为了将一个名字映射成 IP 地址，应用程序调用一个名为解析器（resolver）的库程序，并将名字作为参数传递给此程序</li>
<li>解析器向本地 DNS 服务器发送一个包含该名字的请求报文；本地 DNS 服务器查询该名字，并返回一个包含该名字对应IP地址的响应报文给解析器，然后解析器再将IP地址返回给调用方</li>
<li>查询报文和响应报文都作为 UDP 数据包发送</li>
<li>有了 IP 地址以后，应用程序就可以与目标主机建立一个 TCP 连接，或者给它发送 UDP 数据包</li>
</ul>
<h2 id="DNS-名字空间"><a href="#DNS-名字空间" class="headerlink" title="DNS 名字空间"></a>DNS 名字空间</h2><p>对于 Internet，命名层次结构的顶级由 Internet 名字与数字地址分配机构（ICANN, Internet Corporation for Assigned Names and Numbers）</p>
<p>从概念上讲，Internet 被划分为超过 250 个顶级域名（top-level domains），其中每个域涵盖了许多主机</p>
<ul>
<li>这些域又被进一步划分成子域，这些子域可被再次划分</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-1.png" width="65%">

<p>顶级域名分为两种类型：</p>
<ol>
<li>通用的（generic）: 3 字符的码表示了功能</li>
</ol>
<ul>
<li>主要用于美国</li>
<li>比如：gov, mli, edu, org, com, net</li>
</ul>
<ol start="2">
<li>国家或地区的（countries）: 2 字符的国家/地区（region）码</li>
</ol>
<ul>
<li>包括每个国家或地区，由 ISO 3166 文档定义</li>
<li>au, jp, uk, us, nl</li>
</ul>
<p>通用的顶级域名</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-2.png" width="65%">


<p>域名与金钱挂钩</p>
<ul>
<li>域名抢注（cybersquatting）</li>
</ul>
<h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>每个域的名字是由它向上到（未命名的）根节点的路径来命名的，路径上的各个部分用句点（dot）分开</p>
<p>域名可以是绝对的，也可以是相对的。绝对域名总是以句点作为结束，而相对域名必须在一定的上下文环境中被解释才有真正的含义</p>
<p>域名不区分大小写，因此 edu、EDU、Edu 的含义都一样。各组成部分的名字最多可以有 63 个字符，整个路径的名字不超过 255 个字符</p>
<p>每个域自己控制如何分配它下面的子域</p>
<ul>
<li>为了创建一个新域，创建者必须得到包含该新域的上级域的许可。一旦创建并注册了一个新域，则该新域就可以创建属于自己的子域，而无须得到域名树中任何上层域的许可</li>
</ul>
<p>命名机制遵循的是以组织为边界，而不是以物理网络为边界</p>
<ul>
<li>即使使用同一个 LAN，两个组织也可以属于完全不同的域</li>
<li>也可以在两个不同的地方，但这两个地方的主机属于同一个域</li>
</ul>
<h2 id="域名资源记录（resource-record）"><a href="#域名资源记录（resource-record）" class="headerlink" title="域名资源记录（resource record）"></a>域名资源记录（resource record）</h2><p>无论是只有一台主机的域还是顶级域，每个域都有一组与它相关联的资源记录</p>
<ul>
<li>这些记录组成了 DNS 数据库</li>
</ul>
<p>一条资源记录是一个五元组</p>
<ul>
<li>Domian_name（域名）:指出了这条记录适用于哪个域</li>
<li>Time_to_live（生存期）：指明了该条记录的稳定程度</li>
<li>Class（类别）：对于 Internet 信息，总是 IN</li>
<li>Type（类型）：指出了这是什么类型的记录</li>
<li>Value（值）：可以是一个数字、一个域名或一个 ASCII 字符串，其语义取决于记录的类型</li>
</ul>
<p>主要的 DNS 资源记录类型</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-3.png" width="65%">

<ul>
<li>A（地址）记录，包含了某台主机一个网络接口的 32 位地址</li>
<li>NS 记录，指明了一台用于所在域和子域的名字服务器（拥有一份某域数据库副本的主机）</li>
<li>CNAME 记录，宏定义（可以用另一个串来替代一个串），允许创建别名</li>
<li>PTR 指向另一个名字，正规的DNS数据类型，确切含义取决于上下文</li>
</ul>
<h2 id="域名服务器"><a href="#域名服务器" class="headerlink" title="域名服务器"></a>域名服务器</h2><p>理论上，一台域名服务器可以包含整个 DNS 数据库，并响应所有对该数据库的查询</p>
<ul>
<li>实际上，这台服务器会负载过重，一旦停机，整个 Internet 将会瘫痪</li>
</ul>
<p>为避免由于单个信息源带来的各种问题，DNS 命名空间被划分为一些不重叠的区域（zones）</p>
<ul>
<li>每个圈起来的区域包含域名树的一部分，并且还包含域名服务器（包含有关该区域的信息）</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-4.png" width="65%">


<p>域名和域</p>
<ul>
<li>每个域都被标记为域中的特定的节点</li>
<li>一个 DNS 域名是命名空间下的一个分支</li>
<li>一个域是 DNS 命名空间的一部分，被存储在文件中（包含许多节点）</li>
<li>一个服务器可以把它的域划分，并将它分发其他服务器</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-6.png" width="65%">


<p>区域边界应该放置在区域中的什么位置由该区域的管理员来决定。这个决定在很大程度上取决于需要在哪里使用多少个域名服务器</p>
<p>每个区域都与一个或多个域名服务器关联。这些服务器是持有该区域数据库的主机</p>
<ul>
<li>通常情况下，一个区域有一个主域名服务器和一个或多个辅域名服务器。主服务器从自己磁盘的一个文件读入有关域名信息，辅域名服务器从主域名服务器获取域名信息</li>
<li>为了提高可靠性，一些域名服务器可以设置在区域外面<ul>
<li>添加一个主机</li>
<li>当一个新主机加入该域，管理员将 IP 和名字写入主域名服务器的配置文件中</li>
</ul>
</li>
</ul>
<p>查询一个名字和找出其对应地址的过程称为域名解析（name resolution）</p>
<ul>
<li>当解析器需要查询一个域名，它就把该查询传递给一个本地服务器</li>
<li>如果需要寻找的域恰好落在该域名服务器管辖下，则该域名服务器就返回权威资源记录<ul>
<li>一个权威记录（authoritative record）由管理该记录的权威部门提供，因此总是正确的</li>
<li>权威记录的权威性是相对缓存记录（cached record）而言的，缓存的记录有可能过时</li>
</ul>
</li>
<li>如果被查询域在远端，如果本地没有关于相关域的缓存信息，那么域名服务器启动一次远程查询</li>
</ul>
<p>解析器（resolver）和域名服务器</p>
<ul>
<li>主机上的一个应用程序通过一个 DNS 客户端（解析器）来访问域名服务器</li>
<li>解析器访问 DNS 服务器，叫做域名服务器</li>
<li>DNS 服务器返回 IP 地址，解析器将 IP 地址返回应用</li>
<li><em>相反的查找也是可以的，通过 IP 地址查找名字</em></li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-7.png" width="65%">


<p>解析器查询一个远程域名的 10 个步骤</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-5.png" width="65%">

<ul>
<li>UW 华盛顿大学</li>
</ul>
<ol>
<li>查询报文被发送带本地域名服务器。查询中包含了被查询的域名、类型（A）和类别（IN）</li>
<li>通过请求其中之一的根域名服务器来启动域名层次结构顶部的查询。这些域名服务器包含每个顶级域名的有关信息</li>
</ol>
<ul>
<li>为了与一个根服务器取得联系，每个域名服务器必须有一个或多个根域名服务器的信息</li>
<li>则个信息通常放在一个系统配置文件中，在 DNS 服务器启动时把该文件加载到 DNS 缓存</li>
<li>这个文件很简单，只是列出了关于根服务器的 NS 记录和相应的 A 记录</li>
</ul>
<ol start="3">
<li>根域名服务器（它知道 edu 域的域名服务器）返回查询的答案，其中包括了名字和 IP 地址</li>
<li>本地域名服务器将整个查询发给 edu 域名服务器</li>
<li>edu 域名服务器返回 UW 的域名服务器（washington.edu）</li>
<li>本地域名服务器把查询发给 UW 的域名服务器</li>
<li>如果 CS 运行的是自己的域名服务器，此查询返回的是 CS 的域名服务器和 IP 地址</li>
<li>本地域名服务器查询 CS 的域名服务器</li>
<li>CS 的域名服务器返回最终答案，发到本地域名服务器</li>
<li>本地域名服务器将最终结果转发给主机</li>
</ol>
<p>两种不同的查询机制</p>
<ul>
<li>由 DNS 请求中的 1 个 bit 决定</li>
</ul>
<ol>
<li>当主机将查询发给本地域名服务器后，域名服务器就代替主机处理域名解析工作，直到它返回所需的答案</li>
</ol>
<ul>
<li>这里的答必须是完整的，它不能返回部分答案</li>
<li>这个机制称为递归查询（recursive query）</li>
</ul>
<ol start="2">
<li>根域名服务器（和每个后续的域名服务器）并不是递归查询本地域名服务器。它只是返回一个部分答案，并移动到下一个查询操作。本地域名服务器负责继续解析，具体做法是发出进一步的查询报文</li>
</ol>
<ul>
<li>这个机制称为迭代查询（iterative query）</li>
</ul>
<p>递归查询</p>
<ul>
<li>当主机的域名服务器无法解析查询时，服务器发出一个查询来解析查询</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-8.png" width="65%">


<p>迭代查询</p>
<ul>
<li>当主机的域名服务器无法解析查询时，它将一个引用传递给另一个服务器给解析器</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-9.png" width="65%">


<p>一次域名解析可以涉及两种机制。递归查询似乎总是可取的，但许多域名服务器（尤其是跟服务器）并没有采用这种方式，迭代查询则将重负给查询发起方。本地域名服务器支持递归查询的理由是它负责为其域内的主机提供服务。这些主机不必配置成运行一个完整的域名服务器，它们只要刚好能到达本地域名服务器即可</p>
<p>所有的查询答案，包括所有的部分答案都会被缓存。使用缓存答案的做法可大大降低依次查询的步骤，并能提高查询性能</p>
<ul>
<li>高速缓存的答案不具权威性，因此缓存的表项不应该生存得太长</li>
<li>资源记录中的 <code>Time_to_live</code> 字段</li>
</ul>
<p>关于查询和响应使用的传输层协议。域名系统采用的是 UDP</p>
<ul>
<li>DNS 消息通过 UDP 数据包发送，格式非常简单，只有查询和响应；域名服务器可用此数据包继续进行解析操作</li>
<li>如果在很短的时间内没有响应返回，DNS 客户端必须重复查询请求；如果重复一定次数后仍然失败，则尝试域内另一台域名服务器</li>
<li>查询过程这样设计的主要目的是为了应付出现服务器关闭以及查询或响应包丢失的情况</li>
<li>每个查询报文都包含 16 位的标识符，这个标识符将被复制到响应包中，以便域名服务器将接收到的答案与相应的查询匹配，即使它同时发出了多个查询也不会混淆查询结果</li>
</ul>
<h3 id="13-个根域名服务器"><a href="#13-个根域名服务器" class="headerlink" title="13 个根域名服务器"></a>13 个根域名服务器</h3><p>被本地域名服务器查询，并且不能解析名字</p>
<p>根域名服务器</p>
<ul>
<li>如果名字映射未找到，联系权威域名服务器</li>
<li>获得映射</li>
<li>返回映射给本地域名服务器</li>
</ul>
<p>每个根服务器可以是逻辑上的一台计算机。然而，由于整个 Internet 依赖于根服务器，因此它们必须是能力超强的，并且被大量复制的计算机</p>
<p>大多数服务器被放置在多个地理位置，查询报文通过 <strong>选播 / 任播</strong> 路由到达其中一台服务器</p>
<ul>
<li>选播是一种特殊的路由，它能将数据包路由到最近的一个目标地址实例</li>
<li>复制技术能提高域名系统的可靠性和性能</li>
</ul>
<p>9 个服务器使用一种称为选播（任播, anycast）的路由技术在多个地理位置运行，提高性能并容忍更多的错误</p>
<hr>
<p>为了提高性能和可靠性，还利用了复制和缓存机制，同时设计得具有很强的鲁棒性</p>
<ul>
<li>减少 DNS 流量，域名服务器缓存 <code>域名 - IP</code> 的映射信息<ul>
<li>缓存条目在一段时间后超时（消失）</li>
<li>当查询条目位于缓存中时，服务器不会联系其他服务器</li>
<li>注意：如果从缓存发送条目，则来自服务器的回复将被标记为“未授权”</li>
<li>DNS 使用 53 端口</li>
</ul>
</li>
</ul>
<p>安全机制 DNSSEC，DNS 的安全扩展，防止改变域名到地址的映射</p>
<p>内容分发网络：首先对内容进行命名，然后解析出拥有该内容的附近一个主机的 IP 地址。这种映射模式特别符合搜索一个电影并下载它的应用模式（解析所要的全部结果只是附近具有该影片拷贝的任何一台计算机 IP 地址）</p>
<h1 id="Electronic-Mail"><a href="#Electronic-Mail" class="headerlink" title="Electronic Mail*"></a>Electronic Mail*</h1><h2 id="体系结构和服务"><a href="#体系结构和服务" class="headerlink" title="体系结构和服务"></a>体系结构和服务</h2><p>包括两类子系统：</p>
<ul>
<li>用户代理（user agent）</li>
<li>邮件传输代理（message transfer agent）<ul>
<li>非正式地称作邮件服务器</li>
</ul>
</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-10.png" width="65%">


<p>用户代理是一个程序，用户通过它与电子邮件系统交互</p>
<p>邮件传输代理通常是系统进程，采用的协议是简单邮件传输协议 SMTP（Simple Mail Transfer Protocol）</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-11.png" width="65%">


<h2 id="用户代理"><a href="#用户代理" class="headerlink" title="用户代理"></a>用户代理</h2><p>用户代理是一个程序（电子邮件阅读器），它接受各种各样的命令，从接收和回复邮件到操纵邮箱的命令</p>
<h2 id="邮件格式"><a href="#邮件格式" class="headerlink" title="邮件格式"></a>邮件格式</h2><p>RFC 5322 —— Internet 邮件格式</p>
<ul>
<li>邮件由一个基本的信封、数个头字段、一个空行和邮件体组成</li>
</ul>
<p>与邮件传输相关的主要头字段</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-12.png" width="65%">

<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-13.png" width="65%">


<h3 id="MIME-——-多用途-Internet-邮件扩展"><a href="#MIME-——-多用途-Internet-邮件扩展" class="headerlink" title="MIME —— 多用途 Internet 邮件扩展"></a>MIME —— 多用途 Internet 邮件扩展</h3><p>Multipurpose Internet Mail Extensions</p>
<p>MIME 的基本思想是继续使用 RFC 822 格式，但在邮件体中增加了结构性，并且为传送非 ASCII 码的邮件定义了编码规则</p>
<p>MIME 定义了 5 种新的邮件头</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-14.png" width="65%">


<p>类型以及相关的常用子类型</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-15.png" width="65%">


<h2 id="邮件传送"><a href="#邮件传送" class="headerlink" title="邮件传送"></a>邮件传送</h2><p>邮件传送采用的协议是 SMTP（简单邮件传输协议 Simple Mail Transfer Protocol）</p>
<ul>
<li>在Internet上，发送电子邮件的计算机首先与目标计算机的 25 端口建立一个 TCP 连接。然后在此连接上传送电子邮件</li>
<li>服务器接收入境连接请求，执行某些安全检查，并接受传递过来的邮件</li>
<li>如果一个邮件无法被投递，则向邮件发送方返回错误报告</li>
</ul>
<p>SMTP 是一个简单的 ASCII 协议</p>
<ul>
<li>使用 ASCII 文本。使得协议更加易于开发、测试和调试</li>
<li>通过手动发送命令就可以进行测试，记录的消息易于阅读</li>
<li>HTTP 也以这种方式工作</li>
</ul>
<p>SMTP 的不足</p>
<ul>
<li>SMTP 不包括认证：垃圾邮件</li>
<li>传输的是 ASCII 消息而不是二进制数据：需要 Base64 MIME 内容传送编码方案</li>
<li>SMTP 发送的邮件以明文形式出现</li>
</ul>
<p>邮件传送</p>
<ul>
<li>一旦接收到来自用户代理发送的邮件，邮件传输代理便使用 SMTP 将该邮件传送给接收邮件传输代理<ul>
<li>为了确定要联系的正确邮件服务器，必须咨询 DNS</li>
</ul>
</li>
</ul>
<h2 id="最后传递"><a href="#最后传递" class="headerlink" title="最后传递"></a>最后传递</h2><p>SMTP 是一种基于推（push-based）的协议，它获取一个邮件，并且连接到远程服务器来传递邮件。邮件的最终交付不能以这种方式实现，因为</p>
<ul>
<li>邮件传输代理上的邮箱必须可以连续存储</li>
<li>用户代理可能在 SMTP 视图中继邮件的那一刻无法连接到 Internet 上</li>
</ul>
<h3 id="IMAP-——-Internet邮件访问协议"><a href="#IMAP-——-Internet邮件访问协议" class="headerlink" title="IMAP —— Internet邮件访问协议"></a>IMAP —— Internet邮件访问协议</h3><p>Internet Message Access Protocol</p>
<p>为了使用 IMAP，邮件服务器必须运行 IMAP 服务器，它负责监听 143 端口</p>
<p>IMAP 是较早使用的最终交付协议 —— 邮局协议版本3（POP3, Post Office Protocol, version 3）的改进版</p>
<ul>
<li>POP3 监听 110 端口</li>
</ul>
<p>Webmail</p>
<ul>
<li>许多 Webmail 的实现使用 IMAP 从服务器检索电子邮件并在 Web 浏览器中显示它们，使得此协议的使用对用户透明</li>
</ul>
<h1 id="WWW-——-World-Wide-Web"><a href="#WWW-——-World-Wide-Web" class="headerlink" title="WWW —— World Wide Web"></a>WWW —— World Wide Web</h1><p>Web 是万维网（World Wide Web）的俗称，它是一个体系结构框架。该框架把分布在整个 Internet 数百万台机器上的内容链接起来供人们访问</p>
<p>万维网联盟（W3C, World Wide Web Consortium）</p>
<h2 id="体系架构概述"><a href="#体系架构概述" class="headerlink" title="体系架构概述"></a>体系架构概述</h2><p>Web 页面（Web Pages）或简称为页面（page）</p>
<ul>
<li>内容以页面的形式表示</li>
</ul>
<p>超文本（Hypertext）</p>
<ul>
<li>让一个页面指向另一个页面</li>
</ul>
<p>超链接（Hyperlinks）</p>
<ul>
<li>与另一个页面相关的一小段文字、一个图标、一个图像等</li>
</ul>
<p>HTML</p>
<ul>
<li>超文本标记语言</li>
</ul>
<p>浏览器（Browser）</p>
<ul>
<li>浏览器取回请求的页面，对页面内容进行解释，并在屏幕上显示</li>
</ul>
<p>页面显示的基本工作模型</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-16.png" width="65%">


<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p>在显示一个被选中的页面之前，首先必须回答3个问题</p>
<ul>
<li>这个页面叫什么</li>
<li>这个页面在哪里</li>
<li>如何访问这个页面</li>
</ul>
<p>当用户点击一个超链接，浏览器就执行一系列的步骤来获取该超链接指向的网页</p>
<ol>
<li>浏览器确定 URL</li>
<li>浏览器请求 DNS 查询服务器的 IP 地址</li>
<li>DNS 返回 IP 地址</li>
<li>浏览器与 IP 地址对应的机器的 80 端口建立一个 TCP 连接，80 端口是 HTTP 协议的知名端口（famous ports）</li>
<li>浏览器发送 HTTP 报文，请求页面</li>
<li>服务器返回页面作为 HTTP 响应</li>
<li>如果该页面包括需要显示的 URL，那么浏览器经过同样的处理过程获取其他 URL</li>
<li>浏览器显示页面</li>
<li>如果短期内没有向同一个服务器发出其它请求，就释放 TCP 连接</li>
</ol>
<p>URL（Uniform Resource Locator, 统一资源定位符）包括三个部分</p>
<ul>
<li>协议（也称为方案（scheme））</li>
<li>页面所在机器的 DNS 名字</li>
<li>唯一指向特定页面的路径</li>
</ul>
<p>URL 设计是开放式的，在某种意义上它很简单，允许浏览器使用多种协议去获得各种不同的资源</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-17.png" width="65%">

<p>URI（Uniform Resource Identifiers, 统一资源标识符）</p>
<ul>
<li>某些 URI 告诉浏览器如何定位资源，就是 URL；其他 URI 告诉了资源名字，但没有说明哪里可以找到它，这些 URI 就称为统一资源名（Uniform Resource Names）</li>
</ul>
<h3 id="MIME-类型"><a href="#MIME-类型" class="headerlink" title="MIME 类型"></a>MIME 类型</h3><img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-18.png" width="65%">

<p>有两种可能的方式，插件和辅助应用程序</p>
<ul>
<li>插件（plug-in）是一个第三方代码模块，作为扩展（extension）被安装到浏览器中</li>
<li>辅助应用程序（helper application）是一个作为独立进程运行的完整程序</li>
</ul>
<h3 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h3><p>服务器在主循环中执行如下步骤</p>
<ol>
<li>接受来自客户端（浏览器）的 TCP 连接</li>
<li>获取页面的路径，即被请求文件的名字</li>
<li>获取文件（从磁盘上）</li>
<li>将文件内容发送给用户</li>
<li>释放该 TCP 连接</li>
</ol>
<p>现代 Web 服务器具有更多的功能，但本质上这就是 Web 服务器在最简单情况下所作的工作，即获取一个包含网页内容的文件</p>
<p>对于动态内容，第 3 步必须替换成运行一个程序（由路径决定），该程序性能返回网页的内容</p>
<p>多线程模式（multiithreaded）服务器</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-19.png" width="65%">

<p>在其中一种设计方案中，服务器由一个前端模块（front-end module）和 k 个处理模块组成</p>
<ol>
<li>解析被请求的 Web 页面的名字</li>
<li>执行对该页面的访问控制</li>
<li>检查缓存</li>
<li>从磁盘上获取请求的页面或者运行一个创建页面的程序</li>
<li>确定响应中的剩余部分（比如要发送的MIME类型）</li>
<li>把响应返回给用户</li>
<li>在服务器的日志中增加一个表项</li>
</ol>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>网络基本上是无状态的</p>
<ul>
<li>没有登录会话的概念。浏览器发送一个请求服务器，并获得返回的文件。然后，服务器彻底忘记它已经看到过哪些特定的客户</li>
</ul>
<p>问题</p>
<ul>
<li>区分注册用户</li>
<li>电子商务中跟踪客户</li>
<li>定制的门户网站</li>
</ul>
<p>RFC 2109 / RFC 2965</p>
<ul>
<li>当客户请求一个 Web 页面时，服务器除了提供所请求的页面以外，还以 Cookie 的形式提供了一些附加的信息</li>
<li>Cookie 是一个相当小的命名的串（最多 4 KB），服务器将它与浏览器关联。浏览器把服务器所提供的 Cookie 通常存储在客户机磁盘 Cookie 目录下一段时间，这样在整个浏览器调用期间一直坚持 Cookie，除非用户禁用 Cookie</li>
</ul>
<h4 id="Cookie-字段"><a href="#Cookie-字段" class="headerlink" title="Cookie 字段"></a>Cookie 字段</h4><p>域（domain）</p>
<ul>
<li>指出 Cookie 来自何方</li>
</ul>
<p>路径（path）</p>
<ul>
<li>服务器目录结构中的一个路径，它标识了服务器文件树的哪些部分可能使用该 Cookie</li>
<li>路径通常是 <code>/</code>，意味着整棵树</li>
</ul>
<p>内容（content）</p>
<ul>
<li>采用 <code>名字=值</code> 的形式，Cookie 的名称 = Cookie 保存的文本值</li>
</ul>
<p>过期时间（expires）</p>
<ul>
<li>指定了该 Cookie 何时过期</li>
<li>非持续（nonpersistent）：在浏览器退出时丢弃 Cookie</li>
<li>持续（persistent）：针对 Cookie 提供了时间和日期</li>
</ul>
<p>安全（secure）</p>
<ul>
<li>指示浏览器只向使用安全传输连接的服务器返回 Cookie<ul>
<li>安全传输就是 SSL/TLS</li>
</ul>
</li>
</ul>
<p>例子</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-20.png" width="65%">


<p>如何使用 Cookie</p>
<ul>
<li>在浏览器向某个 Web 站点发出一个页面请求之前，浏览器检查它的 Cookie 目录，确定这个请求前往的目标域是否在当前客户端放置了 Cookie</li>
<li>如果存在相应的 Cookie，则该域放置的所有 Cookie 都被包含到请求消息中。服务器得到了这些 Cookie 以后，就可以按它所期望的方式来解释它们</li>
</ul>
<p>Cookie 与会话 ID（Session ID）</p>
<ul>
<li>用户 ID 或 Session ID（一个长字符/唯一分配的字符串）通常存储在 Cookie 中。在存储关于用户或会话的信息时，会话 ID 被用作密钥或标识符</li>
<li>例如，用户登录到一个站点。如果用户名和密码匹配，则服务器在浏览器中设置一个包含会话 ID 的 Cookie（<code>Set-Cookie</code>）; 服务器还会在网站数据库中存储一个将会话 ID 映射到用户名的条目。当 Cookie 被返回时，将读取会话标识并在数据库中查找用户名</li>
</ul>
<h2 id="静态-Web-页面"><a href="#静态-Web-页面" class="headerlink" title="静态 Web 页面"></a>静态 Web 页面</h2><p>HTML (HyperText Markup Language) —— 超文本标记语言</p>
<ul>
<li>HTML 允许用户生成一个包含了文本、图形和指向其他 Web 页面指针的 Web 页面</li>
<li>HTML 是一种标记语言，或一种描述了如何格式化文档的语言</li>
</ul>
<h3 id="动态-Web-页面和-Web-应用"><a href="#动态-Web-页面和-Web-应用" class="headerlink" title="动态 Web 页面和 Web 应用*"></a>动态 Web 页面和 Web 应用*</h3><img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-21.png" width="65%">

<p>公共网关接口（CGI, Common Gateway Interface）</p>
<p>超文本预处理器（PHP, Hypertext Preprocessor）</p>
<p>AJAX 异步 JavaScript 和 XML（Asynchronous JAvascript and Xml）</p>
<p>文档对象模型（DOM, Document Object Model）</p>
<p>可扩展标记语言（XML, eXtensible Markup Language）</p>
<p>用来生成动态页面的不同技术</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-22.png" width="65%">


<h2 id="HTTP-——-超文本传输协议"><a href="#HTTP-——-超文本传输协议" class="headerlink" title="HTTP —— 超文本传输协议"></a>HTTP —— 超文本传输协议</h2><p>The HyperText Transfer Protocol</p>
<p>一个简单的请求-响应协议，通常运行在 TCP 上</p>
<p>制定了客户端可能发送给服务器什么样的消息以及得到什么样的响应</p>
<h3 id="请求-响应模型"><a href="#请求-响应模型" class="headerlink" title="请求-响应模型"></a>请求-响应模型</h3><p>HTTP 具有简单的结构</p>
<ul>
<li>客户端发送 ASCII 请求消息</li>
<li>服务器返回应答消息（类似 MIME）</li>
</ul>
<p>HTTP 可以通过单个 TCP 连接支持多个请求-应答交换</p>
<p>连接</p>
<ul>
<li>浏览器与服务器联系最常用的方法是与服务器机器上的端口 80 建立一个 TCP 连接</li>
</ul>
<p>HTTP1.0（a）<br>HTTP1.1（b,c）</p>
<ul>
<li>持续连接（persistent connection）/ 连接重用（connection reuse）</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-23.png" width="65%">

<ul>
<li>（a）单独连接单独请求</li>
<li>（b）持续连接，单独请求</li>
<li>（c）持续连接，连续请求（pipelling）</li>
</ul>
<p>并行连接（parallel connection）</p>
<ul>
<li>在每个 TCP 连接上发送一个请求，但同时并行打开多个 TCP 连接</li>
</ul>
<p>方法（method）</p>
<ul>
<li>GET / POST</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-24.png" width="65%">


<p>响应组的状态码</p>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-25.png" width="65%">


<h3 id="HTTP-消息"><a href="#HTTP-消息" class="headerlink" title="HTTP 消息"></a>HTTP 消息</h3><p>每条消息，无论是请求或是响应，都有三个部分</p>
<ul>
<li>请求或响应行（request or response line ）</li>
<li>头（header section）</li>
<li>消息正文（body of the message）</li>
</ul>
<p>消息头</p>
<ul>
<li>请求头（request header）/响应头（response header）</li>
</ul>
<p>缓存（caching）</p>
<ul>
<li>优点是当缓存页面重复使用时没必要进行重复传输，减少网络流量和延迟，从而提高性能</li>
<li>困难是如何确定缓存是否要更新</li>
</ul>
<img src="https://media.githubusercontent.com/media/jckling/Assets/master/computer%20networks/7/7-26.png" width="65%">

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>HTTP 是一个非常简单的协议，它有很多种可能的预定义头信息</p>
<ul>
<li>只要客户端和服务器同意，就可以添加更多的类型</li>
</ul>
<p>客户端的请求由三部分组成</p>
<ul>
<li>标题行（header line）</li>
<li>包含头信息的块，以空行结束（header information）</li>
<li>包含数据的（可选）实体主体（entity body）</li>
</ul>
<p>服务器的响应也由这三部分组成</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Jckling</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jckling.github.io/2018/06/25/Notes/Computer%20Networks/The-Application-Layer/">https://jckling.github.io/2018/06/25/Notes/Computer Networks/The-Application-Layer/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jckling.github.io" target="_blank">Jckling's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><a class="post-meta__tags" href="/tags/Computer-Networks/">Computer Networks</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/jckling/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/jckling/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1035234274961147" data-ad-slot="3100725659" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2018/12/23/Security/PentesterLab/From%20SQL%20Injection%20to%20Shell/"><img class="prev-cover" src="https://i.loli.net/2021/06/14/lpk1XZFrfGboA9P.png" onerror="onerror=null;src='/img/jckling/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">From SQL Injection to Shell</div></div></a></div><div class="next-post pull-right"><a href="/2018/06/22/Notes/Computer%20Networks/The-Transport-Layer/"><img class="next-cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" onerror="onerror=null;src='/img/jckling/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">《计算机网络（英文版·第5版）》 The Transport Layer</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2018/06/14/Notes/Computer%20Networks/The-Data-Link-Layer/" title="《计算机网络（英文版·第5版）》 The Data Link Layer"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-14</div><div class="title">《计算机网络（英文版·第5版）》 The Data Link Layer</div></div></a></div><div><a href="/2018/06/13/Notes/Computer%20Networks/The-Introduction/" title="《计算机网络（英文版·第5版）》 The Introduction"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-13</div><div class="title">《计算机网络（英文版·第5版）》 The Introduction</div></div></a></div><div><a href="/2018/06/14/Notes/Computer%20Networks/The-Medium-Access-Control-Sublayer/" title="《计算机网络（英文版·第5版）》 The Medium Access Control Sublayer"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-14</div><div class="title">《计算机网络（英文版·第5版）》 The Medium Access Control Sublayer</div></div></a></div><div><a href="/2018/06/13/Notes/Computer%20Networks/The-Physical-Layer/" title="《计算机网络（英文版·第5版）》 The Physical Layer"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-13</div><div class="title">《计算机网络（英文版·第5版）》 The Physical Layer</div></div></a></div><div><a href="/2018/06/22/Notes/Computer%20Networks/The-Transport-Layer/" title="《计算机网络（英文版·第5版）》 The Transport Layer"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-22</div><div class="title">《计算机网络（英文版·第5版）》 The Transport Layer</div></div></a></div><div><a href="/2018/06/15/Notes/Computer%20Networks/The-Network-Layer/" title="《计算机网络（英文版·第5版）》 The Network Layer"><img class="cover" src="https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-15</div><div class="title">《计算机网络（英文版·第5版）》 The Network Layer</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/jckling/avatar.jpg" onerror="this.onerror=null;this.src='/img/jckling/avatar_404.png'" alt="avatar"/></div><div class="author-info__name">Jckling</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">107</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jckling"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎访问本站 🥳 <br/>评论需要审核，请不要重复提交~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#DNS-%E2%80%94%E2%80%94-Domain-Name-System-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">DNS —— Domain Name System, 域名系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS-%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.</span> <span class="toc-text">DNS 名字空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D"><span class="toc-number">1.2.</span> <span class="toc-text">域名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E8%B5%84%E6%BA%90%E8%AE%B0%E5%BD%95%EF%BC%88resource-record%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">域名资源记录（resource record）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.4.</span> <span class="toc-text">域名服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E4%B8%AA%E6%A0%B9%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">13 个根域名服务器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Electronic-Mail"><span class="toc-number">2.</span> <span class="toc-text">Electronic Mail*</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.</span> <span class="toc-text">体系结构和服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86"><span class="toc-number">2.2.</span> <span class="toc-text">用户代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">邮件格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME-%E2%80%94%E2%80%94-%E5%A4%9A%E7%94%A8%E9%80%94-Internet-%E9%82%AE%E4%BB%B6%E6%89%A9%E5%B1%95"><span class="toc-number">2.3.1.</span> <span class="toc-text">MIME —— 多用途 Internet 邮件扩展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E4%BC%A0%E9%80%81"><span class="toc-number">2.4.</span> <span class="toc-text">邮件传送</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E4%BC%A0%E9%80%92"><span class="toc-number">2.5.</span> <span class="toc-text">最后传递</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IMAP-%E2%80%94%E2%80%94-Internet%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">IMAP —— Internet邮件访问协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WWW-%E2%80%94%E2%80%94-World-Wide-Web"><span class="toc-number">3.</span> <span class="toc-text">WWW —— World Wide Web</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">体系架构概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">3.1.1.</span> <span class="toc-text">客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME-%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">MIME 类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF"><span class="toc-number">3.1.3.</span> <span class="toc-text">服务器端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie"><span class="toc-number">3.1.4.</span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie-%E5%AD%97%E6%AE%B5"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">Cookie 字段</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81-Web-%E9%A1%B5%E9%9D%A2"><span class="toc-number">3.2.</span> <span class="toc-text">静态 Web 页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81-Web-%E9%A1%B5%E9%9D%A2%E5%92%8C-Web-%E5%BA%94%E7%94%A8"><span class="toc-number">3.2.1.</span> <span class="toc-text">动态 Web 页面和 Web 应用*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E2%80%94%E2%80%94-%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.</span> <span class="toc-text">HTTP —— 超文本传输协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.3.1.</span> <span class="toc-text">请求-响应模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E6%B6%88%E6%81%AF"><span class="toc-number">3.3.2.</span> <span class="toc-text">HTTP 消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.3.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/11/22/Other/Datalog%20%E5%BC%95%E6%93%8E%20Souffl%C3%A9%20%E6%8C%87%E5%8D%97/" title="Datalog 引擎 Soufflé 指南"><img src="https://i.loli.net/2021/06/14/oSn9dxfYhEHClIe.jpg" onerror="this.onerror=null;this.src='/img/jckling/404.jpg'" alt="Datalog 引擎 Soufflé 指南"/></a><div class="content"><a class="title" href="/2021/11/22/Other/Datalog%20%E5%BC%95%E6%93%8E%20Souffl%C3%A9%20%E6%8C%87%E5%8D%97/" title="Datalog 引擎 Soufflé 指南">Datalog 引擎 Soufflé 指南</a><time datetime="2021-11-22T11:01:43.000Z" title="发表于 2021-11-22 19:01:43">2021-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/05/Jaeger/CVE-2020-12691%20%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF%E8%BF%BD%E8%B8%AA/" title="CVE-2020-12691 漏洞利用相关信息追踪"><img src="https://i.loli.net/2021/06/14/bk5UlhqE4DZJfYu.png" onerror="this.onerror=null;this.src='/img/jckling/404.jpg'" alt="CVE-2020-12691 漏洞利用相关信息追踪"/></a><div class="content"><a class="title" href="/2021/11/05/Jaeger/CVE-2020-12691%20%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF%E8%BF%BD%E8%B8%AA/" title="CVE-2020-12691 漏洞利用相关信息追踪">CVE-2020-12691 漏洞利用相关信息追踪</a><time datetime="2021-11-05T07:25:15.000Z" title="发表于 2021-11-05 15:25:15">2021-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/26/Other/LogiQL%20%E5%85%A5%E9%97%A8/" title="LogiQL 入门"><img src="https://developer.logicblox.com/wp-content/uploads/2017/12/prod-bg-panelfour.jpg" onerror="this.onerror=null;this.src='/img/jckling/404.jpg'" alt="LogiQL 入门"/></a><div class="content"><a class="title" href="/2021/10/26/Other/LogiQL%20%E5%85%A5%E9%97%A8/" title="LogiQL 入门">LogiQL 入门</a><time datetime="2021-10-26T08:15:05.000Z" title="发表于 2021-10-26 16:15:05">2021-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/12/Security/Gadget%20Inspector%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Gadget Inspector 源码解析"><img src="https://i.loli.net/2021/06/14/2NXqsznriG8blc7.jpg" onerror="this.onerror=null;this.src='/img/jckling/404.jpg'" alt="Gadget Inspector 源码解析"/></a><div class="content"><a class="title" href="/2021/10/12/Security/Gadget%20Inspector%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Gadget Inspector 源码解析">Gadget Inspector 源码解析</a><time datetime="2021-10-12T03:41:30.000Z" title="发表于 2021-10-12 11:41:30">2021-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/11/Other/Python%20%E7%88%AC%E5%8F%96%20twitter%20%E6%95%B0%E6%8D%AE/" title="Python 爬取 twitter 数据"><img src="https://about.twitter.com/content/dam/about-twitter/en/brand-toolkit/brand-banner-desktop.jpg.twimg.1920.jpg" onerror="this.onerror=null;this.src='/img/jckling/404.jpg'" alt="Python 爬取 twitter 数据"/></a><div class="content"><a class="title" href="/2021/10/11/Other/Python%20%E7%88%AC%E5%8F%96%20twitter%20%E6%95%B0%E6%8D%AE/" title="Python 爬取 twitter 数据">Python 爬取 twitter 数据</a><time datetime="2021-10-11T10:44:50.000Z" title="发表于 2021-10-11 18:44:50">2021-10-11</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1035234274961147" data-ad-slot="8787224657" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></main><footer id="footer" style="background-image: url('https://i.loli.net/2021/06/14/z9KUc1FV7eaD8pi.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Jckling</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://blog-comments-puce.vercel.app',
      avatar: 'retro',
      avatarCDN: 'https://sdn.geekzu.org/avatar/',
      path: location.pathname,
      visitor: false,
      dark: 'html[data-theme="dark"]'
    }, {"emoji":"https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"}))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>